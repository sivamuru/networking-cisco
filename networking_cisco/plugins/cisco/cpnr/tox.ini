[tox]
envlist = py27,pep8
minversion- = 2.3.1
skipsdist = True

[testenv]
setenv = VIRTUAL_ENV={envdir}
passenv = TRACE_FAILONLY GENERATE_HASHES http_proxy HTTP_PROXY https_proxy HTTPS_PROXY no_proxy NO_PROXY
usedevelop = True
install_command = pip install -U {opts} {packages}
deps = -r{toxinidir}/requirements.txt
       -r{toxinidir}/test-requirements.txt
whitelist_externals = sh

[testenv:py27]
commands =
  sh {toxinidir}/tools/apply_pnr_patch.sh {envdir} {toxinidir}
  sh tools/pretty_tox.sh '{posargs}'

[testenv:pep8]
basepython = python2.7
commands = pep8 --exclude=*egg,.eggs/*,.tox/*

[tox:jenkins]
sitepackages = True

[flake8]
show-source = True
builtins = _,_devices,_networks
